import{d as E,u as V,o as H,l as A,w as T,c as d,e as l,b as n,I as r,a as t,F as k,r as C,t as c,f as g,m as p,T as F,k as y,g as m,i as v,h as P,p as U,j as i,q as $,s as S,n as W,v as Y,x as Z,y as G,z as J,_ as K}from"./index-CWeiFIn6.js";import{S as O}from"./Sidebar-ZUnVp1Ck.js";const Q={key:0,class:"min-h-screen flex items-center justify-center"},X={key:1},tt={class:"relative h-[55vh] min-h-[380px] flex items-center justify-center overflow-hidden"},et={class:"relative text-center text-white px-4 max-w-4xl mx-auto z-10"},st={class:"flex justify-center gap-2 mb-5 flex-wrap"},ot={class:"text-3xl md:text-4xl lg:text-5xl font-bold leading-tight drop-shadow-2xl"},lt={class:"flex flex-wrap justify-center items-center gap-x-5 gap-y-2 mt-6 text-white/90 text-sm"},at={class:"flex items-center space-x-1.5"},nt={class:"flex items-center space-x-1.5"},rt={class:"flex items-center space-x-1.5"},it={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},dt={class:"lg:flex lg:space-x-8"},ct={class:"lg:w-2/3"},ut={class:"card p-6 md:p-8"},gt=["innerHTML"],ht={class:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700"},xt={class:"flex flex-wrap gap-2"},vt={class:"mt-8 text-center"},pt={key:0,class:"mt-4 p-4 rounded-xl bg-gray-50 dark:bg-gray-800/50 inline-block"},mt={class:"flex justify-center gap-4"},ft={class:"text-center"},_t={class:"w-28 h-28 bg-white rounded-lg p-1 shadow-md"},yt={class:"w-full h-full bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center text-gray-400"},bt={class:"text-center"},wt={class:"w-28 h-28 bg-white rounded-lg p-1 shadow-md"},kt={class:"w-full h-full bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center text-gray-400"},Ct={class:"mt-8 p-5 rounded-xl bg-gradient-to-r from-[#7CB342]/5 to-[#8BC34A]/5 border border-[#7CB342]/20"},Bt={class:"font-bold text-gray-800 dark:text-white mb-3 flex items-center text-sm"},Pt={class:"text-sm text-gray-600 dark:text-gray-400 space-y-2"},St={class:"flex items-start"},jt={class:"flex items-start"},At={class:"break-all"},Tt={class:"text-[#7CB342]"},$t={class:"flex items-start"},It={class:"grid md:grid-cols-2 gap-4 mt-6"},Lt={class:"relative p-5 flex items-center space-x-3 text-white min-h-[100px]"},qt={class:"min-w-0"},Nt={class:"text-xs text-white/70 mb-1.5 flex items-center"},Dt={class:"font-medium line-clamp-2 group-hover:text-[#7CB342] transition-colors"},zt={key:1},Mt={class:"relative p-5 flex items-center justify-end space-x-3 text-white text-right min-h-[100px]"},Rt={class:"min-w-0"},Et={class:"text-xs text-white/70 mb-1.5 flex items-center justify-end"},Vt={class:"font-medium line-clamp-2 group-hover:text-[#7CB342] transition-colors"},Ht={key:0,class:"card p-6 mt-6"},Ft={class:"text-lg font-bold text-gray-800 dark:text-white mb-5 flex items-center"},Ut={class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4"},Wt={class:"aspect-video rounded-xl overflow-hidden mb-3 relative shadow-md"},Yt=["src","alt"],Zt={class:"absolute bottom-2 left-2 right-2 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-300"},Gt={class:"bg-[#7CB342]/80 px-2 py-0.5 rounded"},Jt={class:"text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-[#7CB342] transition-colors line-clamp-2 leading-relaxed"},Kt={class:"lg:w-1/3 mt-8 lg:mt-0"},Ot={key:0,class:"card p-5 mb-5 sticky top-20"},Qt={class:"flex items-center space-x-2 mb-4 pb-3 border-b border-gray-100 dark:border-gray-700"},Xt={class:"w-8 h-8 rounded-full bg-gradient-to-r from-[#7CB342] to-[#8BC34A] flex items-center justify-center"},te={class:"ml-auto text-xs text-gray-400"},ee={class:"space-y-1 max-h-[55vh] overflow-y-auto toc-scrollbar pr-1"},se=["href"],oe={class:"flex items-center"},le={key:0,class:"w-1.5 h-1.5 rounded-full bg-[#7CB342] mr-2"},ae={key:1,class:"w-1 h-1 rounded-full bg-gray-400 mr-2"},ne={class:"line-clamp-1"},re=E({__name:"Post",setup(ie){const I=Y(),L=Z(),h=V(),q=v(()=>I.params.slug),o=v(()=>h.getPostBySlug(q.value)),N=v(()=>o.value?G(o.value.content):0),D=v(()=>o.value?J(o.value.date):""),z=v(()=>o.value?o.value.content.length:0),j=v(()=>o.value?h.sortedPosts.filter(a=>a.slug!==o.value.slug&&(a.tags.some(e=>o.value.tags.includes(e))||a.categories.some(e=>o.value.categories.includes(e)))).slice(0,6):[]),f=v(()=>{if(!o.value)return null;const a=h.sortedPosts.findIndex(e=>e.slug===o.value.slug);return a<h.sortedPosts.length-1?h.sortedPosts[a+1]:null}),_=v(()=>{if(!o.value)return null;const a=h.sortedPosts.findIndex(e=>e.slug===o.value.slug);return a>0?h.sortedPosts[a-1]:null}),b=P([]),M=P("");function R(){if(!o.value)return;const a=document.createElement("div");a.innerHTML=o.value.html;const e=a.querySelectorAll("h1, h2, h3");b.value=Array.from(e).map((u,x)=>{const w=parseInt(u.tagName[1]),s=u.textContent||"";return{id:`heading-${x}`,text:s,level:w}})}H(()=>{A(()=>{const a=document.querySelector(".article-content");a&&a.querySelectorAll("h1, h2, h3").forEach((u,x)=>{u.id=`heading-${x}`})})}),T(o,()=>{A(()=>{R();const a=document.querySelector(".article-content");a&&a.querySelectorAll("h1, h2, h3").forEach((u,x)=>{u.id=`heading-${x}`})})},{immediate:!0}),T(()=>[h.isLoading,o.value],([a,e])=>{!a&&!e&&h.posts.length>0&&L.push("/404")});const B=P(!1);return(a,e)=>{var x,w;const u=U("router-link");return i(),d("div",null,[l(h).isLoading?(i(),d("div",Q,[n(l(r),{icon:"lucide:loader-2",class:"w-12 h-12 animate-spin text-[#7CB342]"})])):o.value?(i(),d("article",X,[t("header",tt,[e[3]||(e[3]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-black/20"},null,-1)),t("div",et,[t("div",st,[(i(!0),d(k,null,C(o.value.categories,s=>(i(),y(u,{key:s,to:{path:"/categories",query:{category:s}},class:"px-4 py-1.5 text-sm bg-[#7CB342]/80 rounded-full backdrop-blur-sm hover:bg-[#D4A04D] transition-all duration-300 shadow-lg"},{default:p(()=>[n(l(r),{icon:"lucide:folder",class:"w-3.5 h-3.5 inline mr-1.5"}),g(" "+c(s),1)]),_:2},1032,["to"]))),128))]),t("h1",ot,c(o.value.title),1),t("div",lt,[t("span",at,[n(l(r),{icon:"lucide:calendar",class:"w-4 h-4 text-[#7CB342]"}),t("span",null,"Published "+c(D.value),1)]),e[1]||(e[1]=t("span",{class:"hidden sm:inline text-white/50"},"|",-1)),t("span",nt,[n(l(r),{icon:"lucide:clock",class:"w-4 h-4 text-[#7CB342]"}),t("span",null,c(N.value)+" min read",1)]),e[2]||(e[2]=t("span",{class:"hidden sm:inline text-white/50"},"|",-1)),t("span",rt,[n(l(r),{icon:"lucide:book-open",class:"w-4 h-4 text-[#7CB342]"}),t("span",null,"~"+c(z.value)+" words",1)])])]),e[4]||(e[4]=t("div",{class:"wave-divider"},[t("svg",{viewBox:"0 0 1440 100",preserveAspectRatio:"none"},[t("path",{d:"M0,50 C150,100 350,0 600,50 C850,100 1050,0 1200,50 C1350,100 1440,50 1440,50 L1440,100 L0,100 Z",fill:"rgba(255,255,255,0.1)"})])],-1))]),t("div",it,[t("div",dt,[t("div",ct,[t("div",ut,[t("div",{class:"article-content",innerHTML:o.value.html},null,8,gt),t("div",ht,[t("div",xt,[(i(!0),d(k,null,C(o.value.tags,s=>(i(),y(u,{key:s,to:{path:"/tags",query:{tag:s}},class:"tag"},{default:p(()=>[n(l(r),{icon:"lucide:hash",class:"w-3 h-3 inline"}),g(c(s),1)]),_:2},1032,["to"]))),128))])]),t("div",vt,[t("button",{onClick:e[0]||(e[0]=s=>B.value=!B.value),class:"inline-flex items-center px-6 py-2.5 rounded-full bg-gradient-to-r from-pink-500 to-orange-500 text-white shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-300"},[n(l(r),{icon:"lucide:heart-handshake",class:"w-5 h-5 mr-2"}),e[5]||(e[5]=g(" Support Me ",-1))]),n(F,{name:"fade"},{default:p(()=>[B.value?(i(),d("div",pt,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500 mb-3"},"Thank you for your support, I will keep working hard!",-1)),t("div",mt,[t("div",ft,[t("div",_t,[t("div",yt,[n(l(r),{icon:"lucide:qr-code",class:"w-8 h-8"})])]),e[6]||(e[6]=t("span",{class:"text-xs text-gray-500 mt-1 block"},"WeChat",-1))]),t("div",bt,[t("div",wt,[t("div",kt,[n(l(r),{icon:"lucide:qr-code",class:"w-8 h-8"})])]),e[7]||(e[7]=t("span",{class:"text-xs text-gray-500 mt-1 block"},"Alipay",-1))])])])):m("",!0)]),_:1})]),t("div",Ct,[t("h4",Bt,[n(l(r),{icon:"lucide:copyright",class:"w-4 h-4 mr-2 text-[#7CB342]"}),e[9]||(e[9]=g(" Copyright Notice ",-1))]),t("div",Pt,[t("p",St,[n(l(r),{icon:"lucide:user",class:"w-3.5 h-3.5 mr-2 mt-0.5 text-gray-500 shrink-0"}),e[10]||(e[10]=t("span",null,[t("strong",{class:"text-gray-700 dark:text-gray-300"},"Author:"),g(" Leguan")],-1))]),t("p",jt,[n(l(r),{icon:"lucide:link",class:"w-3.5 h-3.5 mr-2 mt-0.5 text-gray-500 shrink-0"}),t("span",At,[e[11]||(e[11]=t("strong",{class:"text-gray-700 dark:text-gray-300"},"Link:",-1)),e[12]||(e[12]=g()),t("span",Tt,c(`${((w=(x=a.window)==null?void 0:x.location)==null?void 0:w.origin)||""}/post/${o.value.slug}`),1)])]),t("p",$t,[n(l(r),{icon:"lucide:scale",class:"w-3.5 h-3.5 mr-2 mt-0.5 text-gray-500 shrink-0"}),e[13]||(e[13]=t("span",null,[t("strong",{class:"text-gray-700 dark:text-gray-300"},"License:"),g(" Unless otherwise stated, all posts are licensed under "),t("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",class:"text-[#7CB342] hover:text-[#D4A04D]"},"CC BY-NC-SA 4.0"),g(". Please cite the source!")],-1))])])])]),t("div",It,[f.value?(i(),y(u,{key:0,to:`/post/${f.value.slug}`,class:"card overflow-hidden group relative"},{default:p(()=>[t("div",{class:"absolute inset-0 bg-cover bg-center transition-transform duration-500 group-hover:scale-110",style:$({backgroundImage:`url(${f.value.cover||l(S)(f.value.slug)})`})},null,4),e[15]||(e[15]=t("div",{class:"absolute inset-0 bg-black/50 group-hover:bg-black/40 transition-colors"},null,-1)),t("div",Lt,[n(l(r),{icon:"lucide:chevron-left",class:"w-6 h-6 shrink-0 group-hover:-translate-x-1 transition-transform"}),t("div",qt,[t("div",Nt,[n(l(r),{icon:"lucide:arrow-left",class:"w-3 h-3 mr-1"}),e[14]||(e[14]=g(" Previous ",-1))]),t("h4",Dt,c(f.value.title),1)])])]),_:1},8,["to"])):(i(),d("div",zt)),_.value?(i(),y(u,{key:2,to:`/post/${_.value.slug}`,class:"card overflow-hidden group relative"},{default:p(()=>[t("div",{class:"absolute inset-0 bg-cover bg-center transition-transform duration-500 group-hover:scale-110",style:$({backgroundImage:`url(${_.value.cover||l(S)(_.value.slug)})`})},null,4),e[17]||(e[17]=t("div",{class:"absolute inset-0 bg-black/50 group-hover:bg-black/40 transition-colors"},null,-1)),t("div",Mt,[t("div",Rt,[t("div",Et,[e[16]||(e[16]=g(" Next ",-1)),n(l(r),{icon:"lucide:arrow-right",class:"w-3 h-3 ml-1"})]),t("h4",Vt,c(_.value.title),1)]),n(l(r),{icon:"lucide:chevron-right",class:"w-6 h-6 shrink-0 group-hover:translate-x-1 transition-transform"})])]),_:1},8,["to"])):m("",!0)]),j.value.length>0?(i(),d("div",Ht,[t("h3",Ft,[n(l(r),{icon:"lucide:thumbs-up",class:"w-5 h-5 mr-2 text-[#7CB342]"}),e[18]||(e[18]=g(" Related Posts ",-1))]),t("div",Ut,[(i(!0),d(k,null,C(j.value,s=>(i(),y(u,{key:s.slug,to:`/post/${s.slug}`,class:"group block"},{default:p(()=>[t("div",Wt,[t("img",{src:s.cover||l(S)(s.slug),alt:s.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy",decoding:"async"},null,8,Yt),e[19]||(e[19]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),t("div",Zt,[t("span",Gt,c(s.categories[0]||"Uncategorized"),1)])]),t("h4",Jt,c(s.title),1)]),_:2},1032,["to"]))),128))])])):m("",!0)]),t("div",Kt,[b.value.length>0?(i(),d("div",Ot,[t("div",Qt,[t("div",Xt,[n(l(r),{icon:"lucide:list",class:"w-4 h-4 text-white"})]),e[20]||(e[20]=t("h4",{class:"font-bold text-gray-800 dark:text-white"},"Contents",-1)),t("span",te,c(b.value.length)+" sections",1)]),t("nav",ee,[(i(!0),d(k,null,C(b.value,s=>(i(),d("a",{key:s.id,href:`#${s.id}`,class:W(["toc-item block py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-[#7CB342] transition-all duration-200 border-l-2 border-transparent hover:border-[#7CB342] hover:pl-1",[s.level===1?"pl-3 font-medium":"",s.level===2?"pl-6":"",s.level===3?"pl-9 text-xs":"",M.value===s.id?"text-[#7CB342] border-[#7CB342] bg-[#7CB342]/5":""]])},[t("span",oe,[s.level===1?(i(),d("span",le)):s.level===2?(i(),d("span",ae)):m("",!0),t("span",ne,c(s.text),1)])],10,se))),128))])])):m("",!0),n(O)])])])])):m("",!0)])}}}),ge=K(re,[["__scopeId","data-v-569469a9"]]);export{ge as default};
