import{d as ct,u as ut,o as dt,A as D,v as G,x as Z,c as d,f as i,b as r,I as c,e as t,F as A,i as z,t as m,g,n as J,w,T as pt,j as I,h as k,l as _,k as v,r as mt,a,B as K,p as F,D as ht,E as gt,q as vt,G as xt,_ as ft}from"./index-BIzegw81.js";const yt="/img/aixinmao.gif",_t={key:0,class:"min-h-screen flex items-center justify-center"},bt={key:1},wt={class:"relative h-[45vh] min-h-[320px] flex items-center justify-center overflow-hidden"},kt={class:"relative text-center text-white px-4 max-w-4xl mx-auto z-10"},Ct={class:"flex justify-center gap-2 mb-5 flex-wrap"},Pt={class:"text-3xl md:text-4xl lg:text-5xl font-bold drop-shadow-2xl",style:{"line-height":"1.6em","padding-bottom":"0.15em"}},Bt={class:"flex flex-wrap justify-center items-center gap-x-5 gap-y-2 mt-6 text-white/90 text-sm"},Mt={class:"flex items-center space-x-1.5"},It={class:"flex items-center space-x-1.5"},$t={class:"inline-block min-w-[1.5em] text-center"},Tt={class:"flex items-center space-x-1.5"},At={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},zt={class:"lg:flex lg:space-x-8"},St={class:"lg:w-2/3"},Lt={class:"card p-6 md:p-8"},Rt=["innerHTML"],jt={class:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700"},qt={class:"flex flex-wrap gap-2"},Et={class:"mt-8 text-center"},Nt={class:"coin-wrapper"},Dt={key:0,class:"mt-6"},Ft={class:"mt-8 p-5 rounded-xl bg-gradient-to-r from-[#7CB342]/5 to-[#8BC34A]/5 border border-[#7CB342]/20"},Vt={class:"font-bold text-gray-800 dark:text-white mb-3 flex items-center text-sm"},Ht={class:"text-sm text-gray-600 dark:text-gray-400 space-y-2"},Ut={class:"flex items-start"},Yt={class:"flex items-start"},Gt={class:"break-all"},Zt={class:"text-[#7CB342]"},Jt={class:"flex items-start"},Kt={class:"grid md:grid-cols-2 gap-4 mt-6"},Qt={class:"relative p-5 flex items-center space-x-3 text-white min-h-[100px]"},Wt={class:"min-w-0"},Xt={class:"text-xs text-white/70 mb-1.5 flex items-center"},Ot={class:"font-medium line-clamp-2 group-hover:text-[#7CB342] transition-colors"},te={key:1},ee={class:"relative p-5 flex items-center justify-end space-x-3 text-white text-right min-h-[100px]"},se={class:"min-w-0"},oe={class:"text-xs text-white/70 mb-1.5 flex items-center justify-end"},le={class:"font-medium line-clamp-2 group-hover:text-[#7CB342] transition-colors"},ne={key:0,class:"card p-6 mt-6"},ie={class:"text-lg font-bold text-gray-800 dark:text-white mb-5 flex items-center"},ae={class:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4"},re={class:"aspect-video rounded-xl overflow-hidden mb-3 relative shadow-md"},ce=["src","alt"],ue={class:"absolute bottom-2 left-2 right-2 text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity duration-300"},de={class:"bg-[#7CB342]/80 px-2 py-0.5 rounded"},pe={class:"text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-[#7CB342] transition-colors line-clamp-2 leading-relaxed"},me={class:"lg:w-1/3 mt-8 lg:mt-0"},he={key:0,class:"card p-5 mb-5 sticky top-20"},ge={class:"flex items-center space-x-2 mb-4 pb-3 border-b border-gray-100 dark:border-gray-700"},ve={class:"w-8 h-8 rounded-full bg-gradient-to-r from-[#7CB342] to-[#8BC34A] flex items-center justify-center"},xe={class:"ml-auto text-xs text-gray-400"},fe={class:"space-y-1"},ye=["onClick"],_e={class:"flex items-center"},be={key:0,class:"w-1.5 h-1.5 rounded-full bg-[#7CB342] mr-2"},we={key:1,class:"w-1 h-1 rounded-full bg-gray-400 mr-2"},ke={class:"truncate"},Ce=ct({__name:"Post",setup(Pe){const Q=gt(),W=vt(),h=ut(),S=_(()=>Q.params.slug),l=_(()=>h.getPostBySlug(S.value)),X=_(()=>l.value?xt(l.value.date):""),O=_(()=>l.value?l.value.content.length:0),tt=_(()=>l.value?h.getViewCount(l.value.slug):0);let x=null;function et(){const s=document.querySelector('script[src*="busuanzi"]');s&&s.remove(),window.busuanzi=void 0;const e=document.createElement("script");e.src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!0,document.head.appendChild(e);let n=0;x=setInterval(()=>{n+=200;const u=document.getElementById("busuanzi_value_page_pv");if(u&&u.textContent&&u.textContent!==""){const p=parseInt(u.textContent);!isNaN(p)&&p>0&&S.value&&h.setViewCount(S.value,p),x&&clearInterval(x)}n>=5e3&&x&&clearInterval(x)},200)}function V(){x&&(clearInterval(x),x=null)}const H=_(()=>l.value?h.sortedPosts.filter(s=>s.slug!==l.value.slug&&(s.tags.some(e=>l.value.tags.includes(e))||s.categories.some(e=>l.value.categories.includes(e)))).slice(0,6):[]),C=_(()=>{if(!l.value)return null;const s=h.sortedPosts.findIndex(e=>e.slug===l.value.slug);return s<h.sortedPosts.length-1?h.sortedPosts[s+1]:null}),P=_(()=>{if(!l.value)return null;const s=h.sortedPosts.findIndex(e=>e.slug===l.value.slug);return s>0?h.sortedPosts[s-1]:null}),B=v([]),L=v("");function st(s){const e=document.getElementById(s);if(e){const n=e.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:n,behavior:"smooth"}),L.value=s}}function ot(){if(!l.value)return;const s=document.createElement("div");s.innerHTML=l.value.html;const e=s.querySelectorAll("h1, h2, h3");B.value=Array.from(e).map((n,u)=>{const p=parseInt(n.tagName[1]),o=n.textContent||"";return{id:`heading-${u}`,text:o,level:p}})}let f=null;function U(){f==null||f.disconnect();const s=B.value.map(e=>document.getElementById(e.id)).filter(Boolean);s.length!==0&&(f=new IntersectionObserver(e=>{for(const n of e)n.isIntersecting&&(L.value=n.target.id)},{rootMargin:"-80px 0px -65% 0px",threshold:0}),s.forEach(e=>f.observe(e)))}dt(()=>{D(()=>{const s=document.querySelector(".article-content");s&&s.querySelectorAll("h1, h2, h3").forEach((n,u)=>{n.id=`heading-${u}`}),U()})}),G(()=>{f==null||f.disconnect(),V()}),Z(l,s=>{V(),s&&et(),D(()=>{ot();const e=document.querySelector(".article-content");e&&e.querySelectorAll("h1, h2, h3").forEach((u,p)=>{u.id=`heading-${p}`}),U()})},{immediate:!0}),Z(()=>[h.isLoading,l.value],([s,e])=>{!s&&!e&&h.posts.length>0&&W.push("/404")});const M=v(0),R=v(!1),j=v(null),lt=v(null);let $=null;const q=v(!1),E=v(!1),N=v(!1);function Y(){if(!R.value){if(M.value===3){M.value=0;return}R.value=!0,M.value=1,q.value=!0,setTimeout(()=>{D(()=>nt())},50)}}function nt(){const s=j.value;if(!s)return;const e=1500,n=performance.now(),u=Math.floor(Math.random()*5)*90,p=(Math.floor(Math.random()*4)+3)*Math.PI;let o=!1;const T=at=>{const rt=at-n,b=Math.min(rt/e,1),y=-p*Math.pow(b-1,2)+p;s.style.setProperty("--coin-y-multiplier",`${-11*Math.pow(b*2-1,4)+11}`),s.style.setProperty("--coin-x-multiplier",`${b}`),s.style.setProperty("--coin-scale-multiplier",`${b*.6}`),s.style.setProperty("--coin-rotation-multiplier",`${b*u}`),s.style.setProperty("--front-scale-multiplier",`${Math.max(Math.cos(y),0)}`),s.style.setProperty("--front-y-multiplier",`${Math.sin(y)}`),s.style.setProperty("--middle-scale-multiplier",`${Math.abs(Math.cos(y))}`),s.style.setProperty("--middle-y-multiplier",`${Math.cos((y+Math.PI/2)%Math.PI)}`),s.style.setProperty("--back-scale-multiplier",`${Math.max(Math.cos(y-Math.PI),0)}`),s.style.setProperty("--back-y-multiplier",`${Math.sin(y-Math.PI)}`),s.style.setProperty("--shine-opacity-multiplier",`${4*Math.sin((y+Math.PI/2)%Math.PI)-3.2}`),s.style.setProperty("--shine-bg-multiplier",`${-40*(Math.cos((y+Math.PI/2)%Math.PI)-.5)}%`),b<1?(!o&&b>.93&&(o=!0,E.value=!0),$=requestAnimationFrame(T)):(N.value=!0,s.style.setProperty("opacity","0"),setTimeout(()=>{q.value=!1,E.value=!1,N.value=!1,setTimeout(()=>{it(),M.value=3,R.value=!1},300)},1500))};$=requestAnimationFrame(T)}function it(){const s=j.value;s&&(s.style.setProperty("--coin-x-multiplier","0"),s.style.setProperty("--coin-scale-multiplier","0"),s.style.setProperty("--coin-rotation-multiplier","0"),s.style.setProperty("--shine-opacity-multiplier","0.4"),s.style.setProperty("--shine-bg-multiplier","50%"),s.style.setProperty("opacity","1"))}return G(()=>{$&&cancelAnimationFrame($)}),(s,e)=>{var u,p;const n=mt("router-link");return a(),d("div",null,[i(h).isLoading?(a(),d("div",_t,[r(i(c),{icon:"lucide:loader-2",class:"w-12 h-12 animate-spin text-[#7CB342]"})])):l.value?(a(),d("article",bt,[t("header",wt,[e[4]||(e[4]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-black/20"},null,-1)),t("div",kt,[t("div",Ct,[(a(!0),d(A,null,z(l.value.categories,o=>(a(),I(n,{key:o,to:{path:"/categories",query:{category:o}},class:"px-4 py-1.5 text-sm bg-[#7CB342]/80 rounded-full backdrop-blur-sm hover:bg-[#D4A04D] transition-all duration-300 shadow-lg"},{default:w(()=>[r(i(c),{icon:"lucide:folder",class:"w-3.5 h-3.5 inline mr-1.5"}),g(" "+m(o),1)]),_:2},1032,["to"]))),128))]),t("h1",Pt,m(l.value.title),1),t("div",Bt,[t("span",Mt,[r(i(c),{icon:"lucide:calendar",class:"w-4 h-4 text-[#7CB342]"}),t("span",null,"Published "+m(X.value),1)]),e[1]||(e[1]=t("span",{class:"hidden sm:inline text-white/50"},"|",-1)),t("span",It,[r(i(c),{icon:"lucide:eye",class:"w-4 h-4 text-[#7CB342]"}),t("span",null,[t("span",$t,m(tt.value||"--"),1),e[0]||(e[0]=g(" views",-1))])]),e[2]||(e[2]=t("span",{class:"hidden sm:inline text-white/50"},"|",-1)),t("span",Tt,[r(i(c),{icon:"lucide:book-open",class:"w-4 h-4 text-[#7CB342]"}),t("span",null,"~"+m(O.value)+" words",1)])]),e[3]||(e[3]=t("span",{id:"busuanzi_value_page_pv",class:"hidden"},null,-1))]),e[5]||(e[5]=t("div",{class:"wave-divider"},[t("svg",{viewBox:"0 0 1440 100",preserveAspectRatio:"none"},[t("path",{d:"M0,50 C150,100 350,0 600,50 C850,100 1050,0 1200,50 C1350,100 1440,50 1440,50 L1440,100 L0,100 Z",fill:"rgba(255,255,255,0.1)"})])],-1))]),t("div",At,[t("div",zt,[t("div",St,[t("div",Lt,[t("div",{class:"article-content",innerHTML:l.value.html},null,8,Rt),t("div",jt,[t("div",qt,[(a(!0),d(A,null,z(l.value.tags,o=>(a(),I(n,{key:o,to:{path:"/tags",query:{tag:o}},class:"tag"},{default:w(()=>[r(i(c),{icon:"lucide:hash",class:"w-3 h-3 inline"}),g(m(o),1)]),_:2},1032,["to"]))),128))])]),t("div",Et,[t("button",{ref_key:"tipBtnRef",ref:lt,onClick:Y,class:J(["tip-button",{clicked:q.value,"shrink-landing":E.value,"coin-landed":N.value}])},[e[7]||(e[7]=t("span",{class:"tip-button__text"},"Support Me",-1)),t("div",Nt,[t("div",{ref_key:"coinRef",ref:j,class:"coin"},[...e[6]||(e[6]=[t("div",{class:"coin__middle"},null,-1),t("div",{class:"coin__back"},null,-1),t("div",{class:"coin__front"},null,-1)])],512)])],2),r(pt,{name:"reward-cat"},{default:w(()=>[M.value===3?(a(),d("div",Dt,[e[8]||(e[8]=t("img",{src:yt,alt:"sending love",class:"w-28 h-28 mx-auto drop-shadow-lg"},null,-1)),e[9]||(e[9]=t("p",{class:"text-sm text-pink-500 mt-3 font-medium"},"Thank you for your support!",-1)),t("button",{onClick:Y,class:"mt-2 text-xs text-gray-400 hover:text-gray-500 transition-colors"}," Click to dismiss ")])):k("",!0)]),_:1})]),t("div",Ft,[t("h4",Vt,[r(i(c),{icon:"lucide:copyright",class:"w-4 h-4 mr-2 text-[#7CB342]"}),e[10]||(e[10]=g(" Copyright Notice ",-1))]),t("div",Ht,[t("p",Ut,[r(i(c),{icon:"lucide:user",class:"w-3.5 h-3.5 mr-2 mt-0.5 text-gray-500 shrink-0"}),e[11]||(e[11]=t("span",null,[t("strong",{class:"text-gray-700 dark:text-gray-300"},"Author:"),g(" Leguan")],-1))]),t("p",Yt,[r(i(c),{icon:"lucide:link",class:"w-3.5 h-3.5 mr-2 mt-0.5 text-gray-500 shrink-0"}),t("span",Gt,[e[12]||(e[12]=t("strong",{class:"text-gray-700 dark:text-gray-300"},"Link:",-1)),e[13]||(e[13]=g()),t("span",Zt,m(`${((p=(u=s.window)==null?void 0:u.location)==null?void 0:p.origin)||""}/post/${l.value.slug}`),1)])]),t("p",Jt,[r(i(c),{icon:"lucide:scale",class:"w-3.5 h-3.5 mr-2 mt-0.5 text-gray-500 shrink-0"}),e[14]||(e[14]=t("span",null,[t("strong",{class:"text-gray-700 dark:text-gray-300"},"License:"),g(" Unless otherwise stated, all posts are licensed under "),t("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",class:"text-[#7CB342] hover:text-[#D4A04D]"},"CC BY-NC-SA 4.0"),g(". Please cite the source!")],-1))])])])]),t("div",Kt,[C.value?(a(),I(n,{key:0,to:`/post/${C.value.slug}`,class:"card overflow-hidden group relative"},{default:w(()=>[t("div",{class:"absolute inset-0 bg-cover bg-center transition-transform duration-500 group-hover:scale-110",style:K({backgroundImage:`url(${C.value.cover||i(F)(C.value.slug)})`})},null,4),e[16]||(e[16]=t("div",{class:"absolute inset-0 bg-black/50 group-hover:bg-black/40 transition-colors"},null,-1)),t("div",Qt,[r(i(c),{icon:"lucide:chevron-left",class:"w-6 h-6 shrink-0 group-hover:-translate-x-1 transition-transform"}),t("div",Wt,[t("div",Xt,[r(i(c),{icon:"lucide:arrow-left",class:"w-3 h-3 mr-1"}),e[15]||(e[15]=g(" Previous ",-1))]),t("h4",Ot,m(C.value.title),1)])])]),_:1},8,["to"])):(a(),d("div",te)),P.value?(a(),I(n,{key:2,to:`/post/${P.value.slug}`,class:"card overflow-hidden group relative"},{default:w(()=>[t("div",{class:"absolute inset-0 bg-cover bg-center transition-transform duration-500 group-hover:scale-110",style:K({backgroundImage:`url(${P.value.cover||i(F)(P.value.slug)})`})},null,4),e[18]||(e[18]=t("div",{class:"absolute inset-0 bg-black/50 group-hover:bg-black/40 transition-colors"},null,-1)),t("div",ee,[t("div",se,[t("div",oe,[e[17]||(e[17]=g(" Next ",-1)),r(i(c),{icon:"lucide:arrow-right",class:"w-3 h-3 ml-1"})]),t("h4",le,m(P.value.title),1)]),r(i(c),{icon:"lucide:chevron-right",class:"w-6 h-6 shrink-0 group-hover:translate-x-1 transition-transform"})])]),_:1},8,["to"])):k("",!0)]),H.value.length>0?(a(),d("div",ne,[t("h3",ie,[r(i(c),{icon:"lucide:thumbs-up",class:"w-5 h-5 mr-2 text-[#7CB342]"}),e[19]||(e[19]=g(" Related Posts ",-1))]),t("div",ae,[(a(!0),d(A,null,z(H.value,o=>(a(),I(n,{key:o.slug,to:`/post/${o.slug}`,class:"group block"},{default:w(()=>[t("div",re,[t("img",{src:o.cover||i(F)(o.slug),alt:o.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy",decoding:"async"},null,8,ce),e[20]||(e[20]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1)),t("div",ue,[t("span",de,m(o.categories[0]||"Uncategorized"),1)])]),t("h4",pe,m(o.title),1)]),_:2},1032,["to"]))),128))])])):k("",!0)]),t("div",me,[B.value.length>0?(a(),d("div",he,[t("div",ge,[t("div",ve,[r(i(c),{icon:"lucide:list",class:"w-4 h-4 text-white"})]),e[21]||(e[21]=t("h4",{class:"font-bold text-gray-800 dark:text-white"},"Contents",-1)),t("span",xe,m(B.value.length)+" sections",1)]),t("nav",fe,[(a(!0),d(A,null,z(B.value,o=>(a(),d("a",{key:o.id,href:"javascript:void(0)",onClick:ht(T=>st(o.id),["prevent"]),class:J(["toc-item block py-2 text-sm leading-relaxed text-gray-600 dark:text-gray-400 hover:text-[#7CB342] transition-all duration-200 border-l-2 border-transparent hover:border-[#7CB342] hover:pl-1",[o.level===1?"pl-3 font-medium":"",o.level===2?"pl-6":"",o.level===3?"pl-9 text-xs":"",L.value===o.id?"!text-[#7CB342] !font-bold border-[#7CB342] bg-[#7CB342]/10":""]])},[t("span",_e,[o.level===1?(a(),d("span",be)):o.level===2?(a(),d("span",we)):k("",!0),t("span",ke,m(o.text),1)])],10,ye))),128))])])):k("",!0)])])])])):k("",!0)])}}}),Me=ft(Ce,[["__scopeId","data-v-3fa9ed7f"]]);export{Me as default};
