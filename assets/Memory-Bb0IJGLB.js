import{d as tt,m as j,o as et,J as ot,c as p,e as l,b as x,f as y,I as M,F as D,i as H,j as nt,w as lt,T as at,K as st,k as S,a as v,D as w,t as A,n as it,h as rt,l as W,_ as ct}from"./index-BIzegw81.js";const ut={class:"relative h-[45vh] min-h-[320px] flex items-center justify-center overflow-hidden"},ht={class:"relative text-center text-white z-10"},dt={class:"relative inline-flex justify-center mt-4 group/tip"},gt={class:"w-9 h-9 rounded-full bg-white/20 backdrop-blur-sm border border-white/30 flex items-center justify-center cursor-pointer transition-all duration-300 hover:bg-white/40 hover:scale-110"},vt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},ft={class:"pool-wrapper"},mt=["src"],bt=["onPointerdown"],pt=["src","alt"],xt={class:"float-photo-label"},yt={class:"lightbox-container"},wt={class:"lightbox-main"},_t=["src","alt"],kt={class:"lightbox-info"},zt={class:"text-white font-medium text-sm"},Mt={class:"text-white/60 text-xs"},At={class:"lightbox-thumbnails"},Ct=["onClick"],It=["src","alt"],i=4,Pt=tt({__name:"Memory",setup(Lt){const Y=j("/img/xiangkuang.png");function d(t,o,s){return s.map(a=>({src:j(`/img/album/${t}/${a}.jpg`),thumb:j(`/img/album/${t}/thumb/${a}.jpg`),title:`${o} ${a}`}))}const $=[{name:"xiamen",label:"Xiamen",photos:d("xiamen","Xiamen",[1,2,3,4,5,6])},{name:"wuhan",label:"Wuhan",photos:d("wuhan","Wuhan",[7,8,9,10,11,12,13,14,15,16])},{name:"xian",label:"Xi'an",photos:d("xi'an","Xi'an",[17,18,19,20,21,22,23,24,25])},{name:"nanjing",label:"Nanjing",photos:d("nanjing","Nanjing",[26,27,28,29,30,31,32,33])},{name:"hangzhou",label:"Hangzhou",photos:d("hangzhou","Hangzhou",Array.from({length:19},(t,o)=>o+34))},{name:"suzhou",label:"Suzhou",photos:d("suzhou","Suzhou",Array.from({length:10},(t,o)=>o+53))},{name:"shenzhen",label:"Shenzhen",photos:d("shenzhen","Shenzhen",Array.from({length:10},(t,o)=>o+63))},{name:"soulpower2",label:"Soul Power II",photos:d("soulpowerⅡ","Soul Power II",Array.from({length:8},(t,o)=>o+73))}],_=[];$.forEach((t,o)=>{const s=Math.min(3,t.photos.length),a=Array.from({length:t.photos.length},(n,e)=>e);for(let n=a.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[a[n],a[e]]=[a[e],a[n]]}for(let n=0;n<s;n++){const e=a[n];_.push({image:t.photos[e].thumb,title:t.label,albumIdx:o,photoIdx:e})}});const f=S(null),c=[];let g=-1,C=0,R=0,X=0,I=!1;function h(t,o){return t+Math.random()*(o-t)}const m=[];function q(t,o){t&&(m[o]=t)}function G(){var s,a;const t=((s=f.value)==null?void 0:s.clientWidth)??800,o=((a=f.value)==null?void 0:a.clientHeight)??600;c.length=0;for(let n=0;n<_.length;n++){const e=Math.round(h(110,150)),Q={x:h(i,t-e-i),y:h(i,o-e-i),vx:h(-.4,.4),vy:h(-.3,.3),rot:h(-15,15),vr:h(-.06,.06),w:e,h:e,grabbed:!1,el:m[n]||null};c.push(Q);const L=m[n];L&&(L.style.width=e+"px",L.style.height=e+"px")}U()}function k(t){t.el&&(t.el.style.transform=`translate3d(${t.x}px,${t.y}px,0) rotate(${t.rot}deg)`)}function U(){for(let t=0;t<c.length;t++)c[t].el=m[t]||null,k(c[t])}function B(){var s,a;const t=((s=f.value)==null?void 0:s.clientWidth)??800,o=((a=f.value)==null?void 0:a.clientHeight)??600;for(let n=0;n<c.length;n++){const e=c[n];e.grabbed||(e.x+=e.vx,e.y+=e.vy,e.rot+=e.vr,e.x<i&&(e.x=i,e.vx=Math.abs(e.vx)),e.x>t-e.w-i&&(e.x=t-e.w-i,e.vx=-Math.abs(e.vx)),e.y<i&&(e.y=i,e.vy=Math.abs(e.vy)),e.y>o-e.h-i&&(e.y=o-e.h-i,e.vy=-Math.abs(e.vy)),k(e))}C=requestAnimationFrame(B)}function V(t,o){g=t,c[t].grabbed=!0,R=o.clientX,X=o.clientY,I=!1;const s=m[t];s&&(s.classList.add("is-grabbed"),s.style.zIndex="30")}function F(){if(g>=0){I||J(g);const t=c[g];t.grabbed=!1,t.vx=h(-.35,.35),t.vy=h(-.25,.25);const o=m[g];o&&(o.classList.remove("is-grabbed"),o.style.zIndex=""),k(t)}g=-1}function K(t){var e;if(g<0)return;const o=t.clientX-R,s=t.clientY-X;(Math.abs(o)>5||Math.abs(s)>5)&&(I=!0);const a=(e=f.value)==null?void 0:e.getBoundingClientRect();if(!a)return;const n=c[g];n.x=t.clientX-a.left-n.w/2,n.y=t.clientY-a.top-n.h/2,n.rot=0,k(n)}const b=S(null),u=S(0),r=W(()=>b.value!==null?$[b.value]:null),z=W(()=>r.value?r.value.photos[u.value]:null);function J(t){const o=_[t];b.value=o.albumIdx,u.value=o.photoIdx}function P(){b.value=null,u.value=0}function T(){r.value&&(u.value=(u.value-1+r.value.photos.length)%r.value.photos.length)}function E(){r.value&&(u.value=(u.value+1)%r.value.photos.length)}function Z(t){u.value=t}function N(t){b.value!==null&&(t.key==="ArrowLeft"?T():t.key==="ArrowRight"?E():t.key==="Escape"&&P())}function O(){G(),C=requestAnimationFrame(B)}return et(()=>{document.addEventListener("keydown",N)}),ot(()=>{cancelAnimationFrame(C),document.removeEventListener("keydown",N)}),(t,o)=>(v(),p("div",null,[l("header",ut,[o[3]||(o[3]=l("div",{class:"absolute inset-0 bg-black/40"},null,-1)),l("div",ht,[x(y(M),{icon:"lucide:images",class:"w-16 h-16 mx-auto mb-4 drop-shadow-lg"}),o[1]||(o[1]=l("h1",{class:"text-4xl md:text-5xl font-bold drop-shadow-lg"},"Gallery",-1)),o[2]||(o[2]=l("p",{class:"mt-3 text-white/80 text-lg"},"Time machine, capturing beautiful moments",-1)),l("div",dt,[l("div",gt,[x(y(M),{icon:"lucide:quote",class:"w-4 h-4 text-white"})]),o[0]||(o[0]=l("div",{class:"absolute top-12 left-1/2 -translate-x-1/2 w-[400px] max-w-[95vw] px-6 py-3 rounded-xl bg-white/60 dark:bg-gray-800/60 backdrop-blur-md border border-white/25 dark:border-gray-700/20 shadow-lg opacity-0 invisible group-hover/tip:opacity-100 group-hover/tip:visible translate-y-2 group-hover/tip:translate-y-0 transition-all duration-300 z-20 pointer-events-none"},[l("div",{class:"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 rotate-45 bg-white/60 dark:bg-gray-800/60 border-l border-t border-white/25 dark:border-gray-700/20"}),l("p",{class:"text-sm text-gray-600 dark:text-gray-300 text-center leading-relaxed relative z-10"}," Click a photo to browse the full album of the same collection. ")],-1))])]),o[4]||(o[4]=l("div",{class:"wave-divider"},[l("svg",{viewBox:"0 0 1440 100",preserveAspectRatio:"none"},[l("path",{d:"M0,50 C150,100 350,0 600,50 C850,100 1050,0 1200,50 C1350,100 1440,50 1440,50 L1440,100 L0,100 Z",fill:"rgba(255,255,255,0.1)"})])],-1))]),l("div",vt,[l("div",ft,[l("img",{src:y(Y),alt:"",class:"pool-frame-img",draggable:"false",onLoad:O},null,40,mt),l("div",{ref_key:"poolRef",ref:f,class:"photo-pool",onPointermove:K,onPointerup:F,onPointerleave:F},[(v(),p(D,null,H(_,(s,a)=>l("div",{key:a,ref_for:!0,ref:n=>q(n,a),class:"float-photo",onPointerdown:w(n=>V(a,n),["prevent"])},[l("img",{src:s.image,alt:s.title,class:"float-photo-img",draggable:"false"},null,8,pt),l("div",xt,A(s.title),1)],40,bt)),64))],544)])]),(v(),nt(st,{to:"body"},[x(at,{name:"lb"},{default:lt(()=>[b.value!==null&&r.value&&z.value?(v(),p("div",{key:0,class:"lightbox-overlay",onClick:w(P,["self"])},[l("div",yt,[l("div",wt,[l("button",{class:"lightbox-nav lightbox-nav-left",onClick:w(T,["stop"])},[x(y(M),{icon:"lucide:chevron-left",class:"w-6 h-6"})]),(v(),p("img",{src:z.value.src,alt:z.value.title,class:"lightbox-img",key:z.value.src},null,8,_t)),l("button",{class:"lightbox-nav lightbox-nav-right",onClick:w(E,["stop"])},[x(y(M),{icon:"lucide:chevron-right",class:"w-6 h-6"})]),l("button",{class:"lightbox-close",onClick:P},"×"),l("div",kt,[l("span",zt,A(r.value.label),1),l("span",Mt,A(u.value+1)+" / "+A(r.value.photos.length),1)])]),l("div",At,[(v(!0),p(D,null,H(r.value.photos,(s,a)=>(v(),p("button",{key:a,onClick:w(n=>Z(a),["stop"]),class:it(["thumb-item",{active:a===u.value}])},[l("img",{src:s.thumb,alt:s.title,class:"thumb-img"},null,8,It)],10,Ct))),128))])])])):rt("",!0)]),_:1})]))]))}}),St=ct(Pt,[["__scopeId","data-v-b95cdbda"]]);export{St as default};
