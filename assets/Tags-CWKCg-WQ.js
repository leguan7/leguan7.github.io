import{d as $,u as z,o as j,x as M,c as r,e,n as m,b as h,f as d,I as v,t as c,F as g,i as x,g as b,h as L,k as T,l as f,a as o,B as _,j as V,E as I,_ as N}from"./index-BIzegw81.js";import{P}from"./PostCardCompact-y_v-Oglt.js";const R={class:"relative h-[45vh] min-h-[320px] flex items-center justify-center overflow-hidden"},W={class:"mt-2 text-white/80 text-sm leading-relaxed"},q={class:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10"},G={key:0,class:"card p-16 text-center"},U={class:"tag-cloud text-center leading-loose"},Z=["onClick"],H={class:"tag-sup"},J={class:"flex items-center justify-between mb-6"},K={class:"text-lg font-bold text-gray-800 dark:text-white flex items-center leading-relaxed"},O={class:"w-7 h-7 rounded-lg bg-[#7CB342]/20 flex items-center justify-center mr-2"},Q={class:"text-sm font-normal text-gray-400 ml-2 leading-relaxed"},X={class:"grid sm:grid-cols-2 gap-4"},Y={class:"flex items-center gap-2 mb-6"},ee={class:"w-8 h-8 rounded-lg bg-[#7CB342]/20 flex items-center justify-center"},te={class:"chart-area"},se={class:"chart-body"},ae={class:"chart-grid"},ne={class:"chart-y-label"},le={class:"chart-bars"},oe={class:"chart-bar-wrapper"},re={class:"chart-bar-value"},ie=["title"],ce=$({__name:"Tags",setup(de){const F=I(),i=z(),l=T(null),u=T(!1);j(()=>{setTimeout(()=>{u.value=!0},200)}),M(()=>F.query.tag,a=>{l.value=a},{immediate:!0});const y=f(()=>l.value?i.getPostsByTag(l.value):[]);function B(a){l.value===a?(l.value=null,window.history.replaceState({},"","/tags")):(l.value=a,window.history.replaceState({},"",`/tags?tag=${encodeURIComponent(a)}`))}function k(a){const s=Math.max(...i.allTags.map(C=>C.count),1),t=Math.min(...i.allTags.map(C=>C.count),1),n=s-t||1;return`${13+(a-t)/n*19}px`}function E(a){const s=Math.max(...i.allTags.map(n=>n.count),1),t=a/s;return t>.6?700:t>.3?600:400}const A=["#E53935","#D81B60","#8E24AA","#5E35B1","#3949AB","#1E88E5","#039BE5","#00ACC1","#00897B","#43A047","#7CB342","#C0CA33","#FDD835","#FFB300","#FB8C00","#F4511E","#6D4C41","#546E7A","#EC407A","#AB47BC","#7E57C2","#5C6BC0","#42A5F5","#26C6DA","#26A69A","#66BB6A","#9CCC65","#D4E157","#FFEE58","#FFCA28","#FFA726","#FF7043"];function S(a){const s=a.split("").reduce((t,n)=>t+n.charCodeAt(0),0);return A[s%A.length]}const p=f(()=>[...i.allTags].sort((a,s)=>s.count-a.count).slice(0,10)),w=f(()=>p.value.length>0?p.value[0].count:1),D=[["#00C9A7","#00B4D8"],["#00D2B4","#20C997"],["#2DC9A0","#38D9A9"],["#45D9A5","#51CF66"],["#5DD9A0","#69DB7C"],["#6DD99A","#82D98C"],["#80D990","#94D082"],["#92D985","#A9C97A"],["#A4D07A","#BCC172"],["#B5C76F","#CEB968"]];return(a,s)=>(o(),r("div",null,[e("header",R,[s[2]||(s[2]=e("div",{class:"absolute inset-0 bg-black/30"},null,-1)),e("div",{class:m(["relative text-center text-white z-10 banner-content",{"animate-in":u.value}])},[h(d(v),{icon:"lucide:tags",class:"w-16 h-16 mx-auto mb-4 drop-shadow-lg"}),s[1]||(s[1]=e("h1",{class:"text-3xl md:text-4xl font-bold drop-shadow-lg"},"Tags",-1)),e("p",W,c(d(i).allTags.length)+" tags in total",1)],2),s[3]||(s[3]=e("div",{class:"wave-divider"},[e("svg",{viewBox:"0 0 1440 100",preserveAspectRatio:"none"},[e("path",{d:"M0,50 C150,100 350,0 600,50 C850,100 1050,0 1200,50 C1350,100 1440,50 1440,50 L1440,100 L0,100 Z",fill:"rgba(255,255,255,0.1)"})])],-1))]),e("div",q,[d(i).isLoading?(o(),r("div",G,[...s[4]||(s[4]=[e("div",{class:"inline-flex flex-col items-center"},[e("div",{class:"w-12 h-12 rounded-xl bg-[#7CB342]/20 flex items-center justify-center mb-3"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-[#7CB342] border-t-transparent"})]),e("p",{class:"text-gray-500 text-sm leading-relaxed"},"Loading...")],-1)])])):(o(),r(g,{key:1},[e("div",{class:m(["card p-8 md:p-10 mb-8 content-block",{"animate-in":u.value}])},[e("div",U,[(o(!0),r(g,null,x(d(i).allTags,t=>(o(),r("button",{key:t.name,onClick:n=>B(t.name),class:m(["tag-cloud-item",{"tag-active":l.value===t.name}]),style:_({fontSize:k(t.count),fontWeight:E(t.count),color:l.value===t.name?"white":S(t.name)})},[b(c(t.name),1),e("sup",H,c(t.count),1)],14,Z))),128))])],2),l.value?(o(),r("div",{key:0,class:m(["content-block mb-8",{"animate-in":u.value}])},[e("div",J,[e("h2",K,[e("span",O,[h(d(v),{icon:"lucide:hash",class:"w-3.5 h-3.5 text-[#7CB342]"})]),b(" "+c(l.value)+" ",1),e("span",Q,"("+c(y.value.length)+" posts)",1)]),e("button",{onClick:s[0]||(s[0]=t=>B(l.value)),class:"px-3 py-1.5 text-sm text-gray-500 hover:text-white hover:bg-red-500 rounded-lg transition-all flex items-center leading-relaxed"},[h(d(v),{icon:"lucide:x",class:"w-4 h-4 mr-1"}),s[5]||(s[5]=b(" Clear ",-1))])]),e("div",X,[(o(!0),r(g,null,x(y.value,(t,n)=>(o(),V(P,{key:t.slug,post:t,index:n},null,8,["post","index"]))),128))])],2)):L("",!0),e("div",{class:m(["card p-6 md:p-8 mb-8 content-block",{"animate-in":u.value}]),style:{"animation-delay":"100ms"}},[e("div",Y,[e("div",ee,[h(d(v),{icon:"lucide:bar-chart-3",class:"w-4 h-4 text-[#7CB342]"})]),s[6]||(s[6]=e("h3",{class:"text-sm font-bold text-gray-800 dark:text-white leading-relaxed"},"Top 10 Tags",-1))]),e("div",te,[e("div",se,[e("div",ae,[(o(),r(g,null,x(7,t=>e("div",{key:t,class:"chart-gridline",style:_({bottom:(t-1)/6*100+"%"})},[e("span",ne,c(Math.round(w.value*(t-1)/6)),1)],4)),64))]),e("div",le,[(o(!0),r(g,null,x(p.value,(t,n)=>(o(),r("div",{key:t.name,class:"chart-bar-col"},[e("div",oe,[e("div",{class:"chart-bar",style:_({height:t.count/w.value*100+"%",background:`linear-gradient(180deg, ${D[n][0]}, ${D[n][1]})`,animationDelay:n*80+"ms"})},[e("span",re,c(t.count),1)],4)]),e("span",{class:"chart-x-label",title:t.name},c(t.name),9,ie)]))),128))])])])],2)],64))])]))}}),ve=N(ce,[["__scopeId","data-v-bbb96854"]]);export{ve as default};
